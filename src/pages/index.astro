---
import BaseLayout from "../layouts/BaseLayout.astro";
import { brands } from "../data/brands";
import { siteConfig } from "../data/site";
import InstagramFeed from "../components/InstagramFeed";
import ReviewsSection from "../components/ReviewsSection.astro";
import Marquee from "../components/Marquee.astro";
import ContactForm from "../components/ContactForm";
---

<BaseLayout
	title="N13 – Mode & Lifestyle in Wangen im Allgäu"
	description={siteConfig.description}
>
	<!-- Hero Section -->
	<section
		id="home"
		class="relative h-screen min-h-[600px] flex items-center justify-center overflow-hidden"
	>
		<!-- Background with image and overlay -->
		<div class="absolute inset-0">
			<img
				src="/images/hero-bg.jpg"
				alt="N13 Store Interior"
				class="w-full h-full object-cover"
			/>
			<div
				class="absolute inset-0 bg-gradient-to-b from-dark/60 via-dark/40 to-dark/80"
			>
			</div>
		</div>

		<div class="relative z-10 text-center px-6 max-w-4xl mx-auto">
			<div class="inline-block mb-6">
				<span
					class="text-accent text-sm tracking-[0.3em] uppercase font-medium"
				>
					Mode & Lifestyle
				</span>
			</div>
			<h1
				class="font-heading text-6xl md:text-8xl lg:text-9xl font-bold text-white mb-6 tracking-wider leading-none"
			>
				<span class="block">N13</span>
				<span
					<span
					class="block ml-12 text-transparent text-stroke-2 text-stroke-white opacity-80"
					style="-webkit-text-stroke: 2px rgba(255,255,255,0.8);"
					>MODE</span
				>
			</h1>
			<p
				class="text-white/90 text-lg md:text-xl font-light max-w-2xl mx-auto mb-4 leading-relaxed drop-shadow-md"
			>
				Herzlich Willkommen
			</p>
			<p
				class="text-white/80 text-base md:text-lg font-light max-w-xl mx-auto leading-relaxed drop-shadow-md"
			>
				Individuell wie Du – im Herzen von Wangen im Allgäu
			</p>
			<div
				class="mt-10 flex flex-col sm:flex-row items-center justify-center gap-4"
			>
				<a
					href="#brands"
					class="px-8 py-3.5 bg-white text-dark text-sm font-medium tracking-wider uppercase hover:bg-accent hover:text-white transition-all duration-300"
				>
					Unsere Brands
				</a>
				<a
					href="#about"
					class="px-8 py-3.5 border border-white text-white text-sm font-medium tracking-wider uppercase hover:bg-white hover:text-dark transition-all duration-300"
				>
					Mehr erfahren
				</a>
			</div>
		</div>

		<!-- Scroll indicator -->
		<div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
			<div
				class="w-6 h-10 border-2 border-white/50 rounded-full flex justify-center pt-2"
			>
				<div class="w-1 h-3 bg-white rounded-full"></div>
			</div>
		</div>
	</section>

	<!-- About Section (Light V3) -->
	<section id="about" class="py-24 lg:py-32 bg-bg text-dark">
		<div class="max-w-7xl mx-auto px-6 lg:px-8">
			<div
				class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center"
			>
				<!-- Image Column -->
				<div class="relative order-2 lg:order-1">
					<div
						class="aspect-[3/4] overflow-hidden relative z-10 shadow-xl"
					>
						<img
							src="/images/about-us-v2.jpg"
							alt="Natalie & Nicola Endres"
							class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-1000"
						/>
					</div>
					<!-- Minimalist decorative element -->
					<div
						class="absolute -bottom-8 -left-8 w-64 h-64 bg-accent/10 -z-0 rounded-full hidden lg:block"
					>
					</div>
				</div>

				<!-- Text Column -->
				<div class="order-1 lg:order-2">
					<span
						class="text-accent text-xs tracking-[0.3em] uppercase font-bold"
					>
						Über Uns
					</span>
					<h2
						class="font-heading text-4xl md:text-6xl font-medium text-dark mt-4 mb-8 leading-tight"
					>
						Mehr als nur <br /> ein Modegeschäft
					</h2>
					<div
						class="space-y-6 text-text-secondary font-light text-lg"
					>
						<p>
							Im Herzen von Wangen im Allgäu haben wir, Natalie
							und Nicola Endres, uns einen Traum erfüllt. Das N13
							ist unsere Vision von modernem Shopping –
							persönlich, stilvoll und immer am Puls der Zeit.
						</p>
						<p>
							Wir lieben Mode, die Geschichten erzählt. Jedes Teil
							in unserem Store ist handverlesen und spiegelt
							unsere Leidenschaft für Qualität und Design wider.
							Bei uns findest du keine Massenware, sondern
							Lieblingsstücke.
						</p>
						<p>
							<strong>Wieso wir keinen Online Shop haben?</strong
							><br />
							Wir glauben daran, dass ein Besuch in unserem Geschäft
							mehr ist als nur eine Transaktion – es ist eine Möglichkeit,
							sich zu inspirieren, zu entdecken und Teil einer Gemeinschaft
							zu werden. Persönliche Beziehungen und individuelle Beratung
							sind uns wichtiger als Klicks. Komm vorbei und erlebe
							den Vibe vor Ort!
						</p>
					</div>

					<div class="mt-12 pt-8 border-t border-border">
						<p
							class="font-heading text-2xl text-dark font-light italic"
						>
							„Normal kann jeder, aber wir sind Anders"
						</p>
						<p
							class="mt-4 text-text-muted font-medium tracking-wider text-xs uppercase"
						>
							— Natalie & Nicola Endres
						</p>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Brands Grid (Reverted to V2 Style) -->
	<section id="brands" class="py-24 lg:py-32 bg-bg-warm">
		<div class="max-w-7xl mx-auto px-6 lg:px-8">
			<div class="text-center mb-16">
				<span
					class="text-accent text-xs tracking-[0.3em] uppercase font-bold"
				>
					Unsere Marken
				</span>
				<h2
					class="font-heading text-4xl md:text-5xl font-medium text-dark mt-4 mb-6"
				>
					Curated Selection
				</h2>
				<p
					class="text-text-secondary max-w-2xl mx-auto font-light text-lg"
				>
					Handverlesene Labels für deinen individuellen Stil.
				</p>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-1">
				{
					brands.slice(0, 9).map((brand, index) => (
						<a
							href={`/brands/${brand.slug}`}
							class="group relative overflow-hidden aspect-[3/4] w-full block bg-gray-100"
						>
							{/* Background Image */}
							<div class="absolute inset-0">
								{brand.image ? (
									<img
										src={brand.image}
										alt={brand.name}
										class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
									/>
								) : (
									<div class="w-full h-full bg-gray-200 flex items-center justify-center">
										<span class="text-dark font-heading text-xl">
											{brand.name}
										</span>
									</div>
								)}
							</div>

							{/* Overlay Gradient (V2 Style) */}
							<div class="absolute inset-0 bg-gradient-to-t from-dark/90 via-dark/20 to-transparent opacity-60 group-hover:opacity-80 transition-opacity duration-500" />

							{/* Content */}
							<div class="absolute bottom-0 left-0 w-full p-8 translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
								<h3 class="font-heading text-3xl text-white mb-2 drop-shadow-md">
									{brand.name}
								</h3>
								<div class="h-1 w-12 bg-accent mb-4 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left" />
								<p class="text-white/90 text-sm font-medium tracking-wide opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-75 drop-shadow-sm">
									{brand.categories[0]}
								</p>
							</div>
						</a>
					))
				}
			</div>

			<div class="text-center mt-16">
				<a
					href="/brands"
					class="inline-flex items-center gap-2 px-10 py-4 bg-dark text-white text-xs font-bold tracking-[0.2em] uppercase hover:bg-accent transition-all duration-300"
				>
					Alle Brands
				</a>
			</div>
		</div>
	</section>

	<!-- Visit Us CTA Banner -->
	<section
		class="py-20 bg-dark text-white text-center relative overflow-hidden"
	>
		<div class="absolute inset-0 opacity-20">
			<img
				src="/images/hero-bg.jpg"
				class="w-full h-full object-cover"
				alt="Store Background"
			/>
		</div>
		<div class="relative z-10 max-w-3xl mx-auto px-6">
			<h2 class="font-heading text-4xl md:text-5xl mb-6">
				Komm vorbei & lass dich beraten
			</h2>
			<p class="text-white/80 text-lg mb-8 font-light">
				Wir freuen uns darauf, dich persönlich im N13 begrüßen zu
				dürfen. Erlebe die Kollektionen hautnah.
			</p>
			<a
				href="#contact"
				class="inline-block border border-white px-10 py-4 text-sm font-bold tracking-[0.2em] uppercase hover:bg-white hover:text-dark transition-all duration-300"
			>
				Zum Store
			</a>
		</div>
	</section>

	<!-- Instagram Feed -->
	<section class="py-24 lg:py-32 bg-surface border-t border-border">
		<div class="max-w-7xl mx-auto px-6 lg:px-8 text-center">
			<span
				class="text-accent text-xs tracking-[0.3em] uppercase font-bold"
			>
				Social
			</span>
			<h2
				class="font-heading text-4xl md:text-5xl font-medium text-dark mt-4 mb-6"
			>
				@n13store
			</h2>
			<p class="text-text-secondary mb-12 max-w-lg mx-auto font-light">
				Inspiration, Neuheiten und Einblicke in unseren Store.
			</p>

			<div class="mb-12">
				<InstagramFeed
					client:visible
					accessToken={import.meta.env.PUBLIC_INSTAGRAM_TOKEN}
				/>
			</div>
		</div>
	</section>

	<!-- Reviews Section (Restored) -->
	<ReviewsSection />

	<!-- Contact Section (Restored with Map + Form) -->
	<section
		id="contact"
		class="py-24 lg:py-32 bg-bg-warm relative overflow-hidden"
	>
		<div class="max-w-7xl mx-auto px-6 lg:px-8 relative z-10">
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-start">
				<!-- Contact Info & Map -->
				<div class="order-1 lg:order-1 pt-8">
					<span
						class="text-accent text-xs tracking-[0.3em] uppercase font-bold"
					>
						Kontakt
					</span>
					<h2
						class="font-heading text-4xl md:text-5xl font-medium text-dark mt-4 mb-8"
					>
						Besuch uns
					</h2>
					<div
						class="space-y-10 text-lg font-light text-text-secondary mb-12"
					>
						<div>
							<strong
								class="block text-dark font-medium text-sm uppercase tracking-wider mb-2"
								>Adresse</strong
							>
							<p>
								{siteConfig.company.address}<br />
								{siteConfig.company.zip}
								{siteConfig.company.city}
							</p>
							<a
								href="https://www.google.com/maps/search/?api=1&query=N13+Wangen"
								target="_blank"
								rel="noopener noreferrer"
								class="inline-flex items-center gap-2 mt-4 text-accent text-sm font-bold tracking-widest uppercase hover:text-dark transition-colors"
							>
								Route planen &rarr;
							</a>
						</div>

						<div>
							<strong
								class="block text-dark font-medium text-sm uppercase tracking-wider mb-2"
								>Öffnungszeiten</strong
							>
							<p>
								{siteConfig.openingHours.weekdays}<br />
								{siteConfig.openingHours.saturday}
							</p>
						</div>

						<div>
							<strong
								class="block text-dark font-medium text-sm uppercase tracking-wider mb-2"
								>Kontakt</strong
							>
							<p>
								<a
									href={`tel:${siteConfig.company.phone.replace(/\s/g, "")}`}
									class="hover:text-accent transition-colors"
								>
									{siteConfig.company.phone}
								</a><br />
								<a
									href={`mailto:${siteConfig.company.email}`}
									class="hover:text-accent transition-colors"
								>
									{siteConfig.company.email}
								</a>
							</p>
						</div>
					</div>

					<!-- Map Iframe Embedded (No Scroll Zoom) -->
					<div
						class="w-full h-[300px] bg-white border border-border shadow-sm p-2 relative grayscale hover:grayscale-0 transition-grayscale duration-500 group"
					>
						<iframe
							src="https://www.openstreetmap.org/export/embed.html?bbox=9.8300,47.6850,9.8360,47.6890&layer=mapnik&marker=47.6870,9.8330"
							width="100%"
							height="100%"
							style="border:0; pointer-events: none;"
							allowfullscreen=""
							loading="lazy"
							class="group-hover:pointer-events-auto"></iframe>
						<div
							class="absolute inset-0 bg-transparent group-hover:hidden pointer-events-none flex items-center justify-center"
						>
							<span class="sr-only">Karte aktivieren</span>
						</div>
					</div>
				</div>

				<!-- Contact Form -->
				<div
					class="bg-white p-8 lg:p-12 shadow-sm border border-border order-2 lg:order-2"
				>
					<h3 class="font-heading text-2xl text-dark mb-6">
						Schreib uns
					</h3>
					<p class="text-text-secondary mb-8 font-light">
						Fragen zu unseren Brands oder Styles? Meld dich gerne!
					</p>
					<ContactForm client:visible />
				</div>
			</div>
		</div>
	</section>
</BaseLayout>
